流程：
客户端判断满足条件-->权限开放-->点击客户端抢红包-->网页访问抢红包-->点击后，向后台查询用户id以及条件是否满足，如果不满足就返回错误信息；如果满足，就返回头像、id、金钱-->点击“拿钱走人”，传输参数给客户端，关闭页面。

技术方面：
1.如何保留小数点后两位？
2.缓存问题：页面缓存cdn就可以搞定了
3.ajax-backend流程：
3.1）ajax发送id,如果接收到错误的消息，就alert；如果接收到正确参数的消息，就显示金钱（小数点怎么解决？），告诉客户端要关闭接口；
3.2）如果超时，会出现的问题（叫客户端到后端拿数据，如果有更新就直接跳到收益记录，关闭抢红包接口，如果没有的话就alert超时）；
3.3）特殊时刻（最后一个红包）：其实返回特殊值，然后去掉它改数字。


js-android：主要就是需要andriod提供id，头像的接口，还有提供一个叫安卓客户端查询后台数据库的接口
————————————
1.#getmoney是不是应该
window.windcalendar.doSomething(102,101,null);
//页面需要借助关闭网页
window.windcalendar.doSomething(103,101,null);
//用于接收确定，然后客户端接收到103就跳到收益记录和关闭安卓的抢红包接口
//应该放在后面吧？还是说没关系，因为客户端会根据参数来调用功能的
2.有没有这种情况出现：再点的时候，会直接跳到结果页，那如果下次再抽奖呢？（情况发生的可能性比较小）
3.需要从客户端那里获取客户的id和头像，要问问怎么样ajax法。
4.成功之后，是不是客户端自己再去后端获取金额？还是从我的ajax？（合理的话应该是客户端自己查）

js-android 2nd:
----------------
1.android--js的数据传输，我能想到用网址来传输值，譬如：
http://172.16.11.44/index.html?var1=value1&var2=value2
其中var1，var2是变量名，value1,value2是值名
实例：
http://172.16.11.44/index.html?id=39&icon=39.png
id=39就是id是39的客户
icon=39.png就是这个客户的头像地址的后缀是39.png

2.头像问题：
a.用户的注册会有头像上传这一功能。如果没有的话，会有一个默认的头像。
（现在没实现，先用默认的头像）(后期会考虑到这个吗？或者干脆干掉？)
b.头像传输的方法：
b-1:利用头像共有的url前缀，譬如说：http://cdn.qiandeer.com/user_icon/39.png，客户端只需要传递：http://172.16.11.44/index.html?id=39&icon=39.png
b-2：你说的把图片转换为string是指把图片转化为base64格式？我不建议这种，因为长度太大

3.对于首次使用“风和日丽”的用户，这个用户如果还没注册，能不能“抢红包”？
3-1.如果能：
优点：我觉得会吸引用户，等跳到“查看收益”的时候再注册？
缺点：【这个的话后台不知道能不能实现】，而且又会产生其他情况，防刷
3-2.如果不能，
优点：对开发友好，以及对安全的考虑
缺点：对用户不友好

4.关于ajax向后台获取数据的情况中，考虑到请求超时，请求超时又分两种情况
4-1：后台修改了数据了（抢到红包了），但是客户没收到参数，前端就没东西显示。我的解决思路是：如果ajax超时，我会传一个参数给客户端，客户端需要从后台读取是否获取到红包之类的标识。所以我才考虑到要客户端向后台拿数据来验证。
4-2：后台没修改数据(没抢到红包)，还是要验证。




js-ajax-backend：主要就是ajax返回参数的定义
-----------------
1.从客户端获取用户id,用ajax发送用户id到后端，后端会判断有没有抽奖的权限（or有没有抽过），返回对应的参数（状态、数据）
状态：
0 成功，返回金额
1 抢完了，（最后一个红包的情况，客户端“抢红包”按钮未取消，多个人只有一个抢到，其它的人应该要返回“抢完了”相关的信息）
2 失败，（条件不匹配，例如抢过了、未到时间、时间过了）

2.恶意通过html页面进行ajax访问服务器？如何防止？
我想到的办法：
a。后端的抢红包功能也设置时间限制访问
b。检测前端的访问次数，一天时间内超过五次的访问表示恶意访问
